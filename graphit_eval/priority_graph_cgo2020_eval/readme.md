This is the guide for evaluating our CGO 2020 paper, **PriorityGraph:A Unified Programming Model for Optimizing Ordered Graph Algorithms**. The following guide consists of a step by step instruction to reproduce Figure 9 (generating C++ code for Single Source Shortest Paths with Delta Steppng using different schedules) and Table 4 (PriorityGraph's Perfromance on our 2-socket machine).  The schedules we used here are very likely  **NOT** the fastest schedules for your machine. **Please only use the instructions here as examples for writing and compiling different schedules, and tune schedules to best fit your machine's features.**


## Setup PriorityGraph ## 
PriorityGraph is implemented as an extension to GraphIt for supporting ordered parallelism. You do **NOT** need any additional setup instruction other than setting up GraphIt. **Please first follow the [Getting Started Guide](https://github.com/GraphIt-DSL/graphit/blob/master/README.md ) to set up GraphIt.** . 



## Reproducing SSSP with Delta Stepping with different schedules ## 

This script demonstrates GraphIt's ability to generate code for lazy and eager schedules, and combine them with other schedules. Figure 9 in the paper shows the different C++ code generated by applying different schedules to Single Source Shortest Paths (SSSP) with Delta Stepping. We have built a script to generate the code for Delta Stepping with different schedules shown in the paper and a few even more complicated schedules. The script also makes sure the generated C++ code compiles successfully. The script simply compiles the PriorityGraph programs. 

```
   #start from graphit root directory
  cd  graphit_eval/priority_graph_cgo2020_eval
  cd sssp_delta_stepping_example
  python compile_sssp_delta_stepping_fig9.py
```

The program should output the information on each schedule, print the generated C++ file to stdout, and save the generated file in .cpp files in the directory. The schedules we used are stored in `sssp_delta_stepping_example/schedules`. We added a eager with bucket fusion schedule that was not included in the paper due to space constraints. 

## Running PriorityGraph generated programs with a single thread on a small graph ## 

### Generating the C++ files from PriorityGraph programs

Here we provide a script that will compile (displaying the commands used) the PriorityGraph programs (with .gt extensions), SSSP with delta stepping, PPSP, AStar Search, KCore, and SetCover into C++ programs using the schedules shown in the paper. 

```
#start from graphit root directory
cd  graphit/graphit_eval/priority_graph_cgo2020_eval/perf_eval

#compile the graphit files (.gt) into C++ files with schedules used in the paper (from  graphit/test/input_with_schedules directory)
make graphit_files

#compile the generated C++ files
make cpps
```

The generated cpp files are in the `perf_eval/cpps` directory, and the compiled binaries are in the `perf_eval/bin` directory. 

## Reproducing PriorityGraph Performance on 2-socekt Intel Xeon E5-2695 v3 CPUs with 30 MB LLC, TPH enabled. ## 